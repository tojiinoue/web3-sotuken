{"ast":null,"code":"import { AbiDecodingZeroDataError } from '../../errors/abi.js';\nimport { BaseError } from '../../errors/base.js';\nimport { ContractFunctionExecutionError, ContractFunctionRevertedError, ContractFunctionZeroDataError, RawContractError } from '../../errors/contract.js';\nimport { InternalRpcError } from '../../errors/rpc.js';\nconst EXECUTION_REVERTED_ERROR_CODE = 3;\nexport function getContractError(err, _ref) {\n  let {\n    abi,\n    address,\n    args,\n    docsPath,\n    functionName,\n    sender\n  } = _ref;\n  const {\n    code,\n    data,\n    message,\n    shortMessage\n  } = err instanceof RawContractError ? err : err instanceof BaseError ? err.walk(err => 'data' in err) || err.walk() : {};\n  let cause = err;\n  if (err instanceof AbiDecodingZeroDataError) {\n    cause = new ContractFunctionZeroDataError({\n      functionName\n    });\n  } else if ([EXECUTION_REVERTED_ERROR_CODE, InternalRpcError.code].includes(code) && (data || message || shortMessage)) {\n    cause = new ContractFunctionRevertedError({\n      abi,\n      data: typeof data === 'object' ? data.data : data,\n      functionName,\n      message: shortMessage !== null && shortMessage !== void 0 ? shortMessage : message\n    });\n  }\n  return new ContractFunctionExecutionError(cause, {\n    abi,\n    args,\n    contractAddress: address,\n    docsPath,\n    functionName,\n    sender\n  });\n}","map":{"version":3,"names":["AbiDecodingZeroDataError","BaseError","ContractFunctionExecutionError","ContractFunctionRevertedError","ContractFunctionZeroDataError","RawContractError","InternalRpcError","EXECUTION_REVERTED_ERROR_CODE","getContractError","err","_ref","abi","address","args","docsPath","functionName","sender","code","data","message","shortMessage","walk","cause","includes","contractAddress"],"sources":["/Users/toji.inoue/Desktop/卒業研究_井上登司フォルダ/web3-sotuken/node_modules/viem/utils/errors/getContractError.ts"],"sourcesContent":["import type { Abi, Address } from 'abitype'\n\nimport { AbiDecodingZeroDataError } from '../../errors/abi.js'\nimport { BaseError } from '../../errors/base.js'\nimport {\n  ContractFunctionExecutionError,\n  ContractFunctionRevertedError,\n  ContractFunctionZeroDataError,\n  RawContractError,\n} from '../../errors/contract.js'\nimport { InternalRpcError } from '../../errors/rpc.js'\n\nconst EXECUTION_REVERTED_ERROR_CODE = 3\n\nexport function getContractError(\n  err: BaseError,\n  {\n    abi,\n    address,\n    args,\n    docsPath,\n    functionName,\n    sender,\n  }: {\n    abi: Abi\n    args: any\n    address?: Address\n    docsPath?: string\n    functionName: string\n    sender?: Address\n  },\n) {\n  const { code, data, message, shortMessage } = (\n    err instanceof RawContractError\n      ? err\n      : err instanceof BaseError\n      ? err.walk((err) => 'data' in (err as Error)) || err.walk()\n      : {}\n  ) as RawContractError\n\n  let cause = err\n  if (err instanceof AbiDecodingZeroDataError) {\n    cause = new ContractFunctionZeroDataError({ functionName })\n  } else if (\n    [EXECUTION_REVERTED_ERROR_CODE, InternalRpcError.code].includes(code) &&\n    (data || message || shortMessage)\n  ) {\n    cause = new ContractFunctionRevertedError({\n      abi,\n      data: typeof data === 'object' ? data.data : data,\n      functionName,\n      message: shortMessage ?? message,\n    })\n  }\n\n  return new ContractFunctionExecutionError(cause, {\n    abi,\n    args,\n    contractAddress: address,\n    docsPath,\n    functionName,\n    sender,\n  })\n}\n"],"mappings":"AAEA,SAASA,wBAAwB,QAAQ,qBAAqB;AAC9D,SAASC,SAAS,QAAQ,sBAAsB;AAChD,SACEC,8BAA8B,EAC9BC,6BAA6B,EAC7BC,6BAA6B,EAC7BC,gBAAgB,QACX,0BAA0B;AACjC,SAASC,gBAAgB,QAAQ,qBAAqB;AAEtD,MAAMC,6BAA6B,GAAG,CAAC;AAEvC,OAAM,SAAUC,gBAAgBA,CAC9BC,GAAc,EAAAC,IAAA,EAeb;EAAA,IAdD;IACEC,GAAG;IACHC,OAAO;IACPC,IAAI;IACJC,QAAQ;IACRC,YAAY;IACZC;EAAM,CAQP,GAAAN,IAAA;EAED,MAAM;IAAEO,IAAI;IAAEC,IAAI;IAAEC,OAAO;IAAEC;EAAY,CAAE,GACzCX,GAAG,YAAYJ,gBAAgB,GAC3BI,GAAG,GACHA,GAAG,YAAYR,SAAS,GACxBQ,GAAG,CAACY,IAAI,CAAEZ,GAAG,IAAK,MAAM,IAAKA,GAAa,CAAC,IAAIA,GAAG,CAACY,IAAI,EAAE,GACzD,EACe;EAErB,IAAIC,KAAK,GAAGb,GAAG;EACf,IAAIA,GAAG,YAAYT,wBAAwB,EAAE;IAC3CsB,KAAK,GAAG,IAAIlB,6BAA6B,CAAC;MAAEW;IAAY,CAAE,CAAC;GAC5D,MAAM,IACL,CAACR,6BAA6B,EAAED,gBAAgB,CAACW,IAAI,CAAC,CAACM,QAAQ,CAACN,IAAI,CAAC,KACpEC,IAAI,IAAIC,OAAO,IAAIC,YAAY,CAAC,EACjC;IACAE,KAAK,GAAG,IAAInB,6BAA6B,CAAC;MACxCQ,GAAG;MACHO,IAAI,EAAE,OAAOA,IAAI,KAAK,QAAQ,GAAGA,IAAI,CAACA,IAAI,GAAGA,IAAI;MACjDH,YAAY;MACZI,OAAO,EAAEC,YAAY,aAAZA,YAAY,cAAZA,YAAY,GAAID;KAC1B,CAAC;;EAGJ,OAAO,IAAIjB,8BAA8B,CAACoB,KAAK,EAAE;IAC/CX,GAAG;IACHE,IAAI;IACJW,eAAe,EAAEZ,OAAO;IACxBE,QAAQ;IACRC,YAAY;IACZC;GACD,CAAC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}