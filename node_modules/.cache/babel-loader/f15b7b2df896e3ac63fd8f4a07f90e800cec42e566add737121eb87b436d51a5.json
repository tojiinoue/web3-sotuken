{"ast":null,"code":"import { numberToHex } from '../../utils/encoding/toHex.js';\nimport { formatFeeHistory } from '../../utils/formatters/feeHistory.js';\n/**\n * Returns a collection of historical gas information.\n *\n * - Docs: https://viem.sh/docs/actions/public/getFeeHistory.html\n * - JSON-RPC Methods: [`eth_feeHistory`](https://docs.alchemy.com/reference/eth-feehistory)\n *\n * @param client - Client to use\n * @param parameters - {@link GetFeeHistoryParameters}\n * @returns The gas estimate (in wei). {@link GetFeeHistoryReturnType}\n *\n * @example\n * import { createPublicClient, http } from 'viem'\n * import { mainnet } from 'viem/chains'\n * import { getFeeHistory } from 'viem/public'\n *\n * const client = createPublicClient({\n *   chain: mainnet,\n *   transport: http(),\n * })\n * const feeHistory = await getFeeHistory(client, {\n *   blockCount: 4,\n *   rewardPercentiles: [25, 75],\n * })\n */\nexport async function getFeeHistory(client, _ref) {\n  let {\n    blockCount,\n    blockNumber,\n    blockTag = 'latest',\n    rewardPercentiles\n  } = _ref;\n  const blockNumberHex = blockNumber ? numberToHex(blockNumber) : undefined;\n  const feeHistory = await client.request({\n    method: 'eth_feeHistory',\n    params: [numberToHex(blockCount), blockNumberHex || blockTag, rewardPercentiles]\n  });\n  return formatFeeHistory(feeHistory);\n}","map":{"version":3,"names":["numberToHex","formatFeeHistory","getFeeHistory","client","_ref","blockCount","blockNumber","blockTag","rewardPercentiles","blockNumberHex","undefined","feeHistory","request","method","params"],"sources":["/Users/toji.inoue/Desktop/卒業研究_井上登司フォルダ/web3-sotuken/node_modules/viem/actions/public/getFeeHistory.ts"],"sourcesContent":["import type { Client } from '../../clients/createClient.js'\nimport type { Transport } from '../../clients/transports/createTransport.js'\nimport type { BlockTag } from '../../types/block.js'\nimport type { Chain } from '../../types/chain.js'\nimport type { FeeHistory } from '../../types/fee.js'\nimport { numberToHex } from '../../utils/encoding/toHex.js'\nimport { formatFeeHistory } from '../../utils/formatters/feeHistory.js'\n\nexport type GetFeeHistoryParameters = {\n  /**\n   * Number of blocks in the requested range. Between 1 and 1024 blocks can be requested in a single query. Less than requested may be returned if not all blocks are available.\n   */\n  blockCount: number\n  /**\n   * A monotonically increasing list of percentile values to sample from each block's effective priority fees per gas in ascending order, weighted by gas used.\n   */\n  rewardPercentiles: number[]\n} & (\n  | {\n      blockNumber?: never\n      /**\n       * Highest number block of the requested range.\n       * @default 'latest'\n       */\n      blockTag?: BlockTag\n    }\n  | {\n      /** Highest number block of the requested range. */\n      blockNumber?: bigint\n      blockTag?: never\n    }\n)\nexport type GetFeeHistoryReturnType = FeeHistory\n\n/**\n * Returns a collection of historical gas information.\n *\n * - Docs: https://viem.sh/docs/actions/public/getFeeHistory.html\n * - JSON-RPC Methods: [`eth_feeHistory`](https://docs.alchemy.com/reference/eth-feehistory)\n *\n * @param client - Client to use\n * @param parameters - {@link GetFeeHistoryParameters}\n * @returns The gas estimate (in wei). {@link GetFeeHistoryReturnType}\n *\n * @example\n * import { createPublicClient, http } from 'viem'\n * import { mainnet } from 'viem/chains'\n * import { getFeeHistory } from 'viem/public'\n *\n * const client = createPublicClient({\n *   chain: mainnet,\n *   transport: http(),\n * })\n * const feeHistory = await getFeeHistory(client, {\n *   blockCount: 4,\n *   rewardPercentiles: [25, 75],\n * })\n */\nexport async function getFeeHistory<TChain extends Chain | undefined>(\n  client: Client<Transport, TChain>,\n  {\n    blockCount,\n    blockNumber,\n    blockTag = 'latest',\n    rewardPercentiles,\n  }: GetFeeHistoryParameters,\n): Promise<GetFeeHistoryReturnType> {\n  const blockNumberHex = blockNumber ? numberToHex(blockNumber) : undefined\n  const feeHistory = await client.request({\n    method: 'eth_feeHistory',\n    params: [\n      numberToHex(blockCount),\n      blockNumberHex || blockTag,\n      rewardPercentiles,\n    ],\n  })\n  return formatFeeHistory(feeHistory)\n}\n"],"mappings":"AAKA,SAASA,WAAW,QAAQ,+BAA+B;AAC3D,SAASC,gBAAgB,QAAQ,sCAAsC;AA4BvE;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,OAAO,eAAeC,aAAaA,CACjCC,MAAiC,EAAAC,IAAA,EAMP;EAAA,IAL1B;IACEC,UAAU;IACVC,WAAW;IACXC,QAAQ,GAAG,QAAQ;IACnBC;EAAiB,CACO,GAAAJ,IAAA;EAE1B,MAAMK,cAAc,GAAGH,WAAW,GAAGN,WAAW,CAACM,WAAW,CAAC,GAAGI,SAAS;EACzE,MAAMC,UAAU,GAAG,MAAMR,MAAM,CAACS,OAAO,CAAC;IACtCC,MAAM,EAAE,gBAAgB;IACxBC,MAAM,EAAE,CACNd,WAAW,CAACK,UAAU,CAAC,EACvBI,cAAc,IAAIF,QAAQ,EAC1BC,iBAAiB;GAEpB,CAAC;EACF,OAAOP,gBAAgB,CAACU,UAAU,CAAC;AACrC"},"metadata":{},"sourceType":"module","externalDependencies":[]}