{"ast":null,"code":"import{Contracts_MetaMask}from\"../../contract/contracts\";import Form from\"react-bootstrap/Form\";import{useState,useEffect,useRef}from\"react\";import MDEditor,{selectWord}from\"@uiw/react-md-editor\";import{resolvePath,useParams}from\"react-router-dom\";import Simple_quiz from\"./components/quiz_simple\";import Quiz_list from\"./components/quiz_list\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Edit_list_top(props){//クイズのコントラクト\nlet cont=new Contracts_MetaMask();//現在表示している個数を保持するref\nconst now_numRef=useRef(0);//保存\nconst[isTeacher,setIsTeacher]=useState(false);//クイズの総数\nconst[quiz_sum,Set_quiz_sum]=useState(null);//保存\n//表示するクイズのリスト\nconst[quiz_list,Set_quiz_list]=useState([]);//保存\n//１回の更新で追加で表示する個数\nconst[add_num,Set_add_num]=useState(7);// コンテナのrefを作成\nconst containerRef=useRef(null);const callback=(entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){// ターゲットの<div>が画面に表示された場合に実行される関数\nconsole.log(\"Target div is visible on the screen!\");// ここに実行したい関数を記述\n// console.log(\"///////\",now_num);\n}});};useEffect(()=>{cont.get_quiz_lenght().then(data=>{// Promise オブジェクトが解決された後の処理を記述\nconsole.log(Number(data));let now=parseInt(Number(data));Set_quiz_sum(now);now_numRef.current=now;});const set_is_teacher=async()=>{setIsTeacher(await cont.isTeacher());};set_is_teacher();},[]);const targetRef=useRef(null);// ターゲット要素のrefを作成\nconsole.log(\"ユーザーのisTeacherステータス\");console.log(isTeacher);if(isTeacher){if(quiz_sum!=null){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Quiz_list,{cont:cont,add_num:add_num,Set_add_num:Set_add_num,quiz_sum:quiz_sum,Set_quiz_sum:Set_quiz_sum,quiz_list:quiz_list,Set_quiz_list:Set_quiz_list,targetRef:targetRef,now_numRef:now_numRef}),quiz_list.map((quiz,index)=>{if(index!==quiz_list.length-add_num){return/*#__PURE__*/_jsx(_Fragment,{children:quiz_list[index]});}}),/*#__PURE__*/_jsx(\"div\",{ref:targetRef,children:\"now_loading\"})]});}else{return/*#__PURE__*/_jsx(_Fragment,{});}}else{return/*#__PURE__*/_jsx(_Fragment,{});}}export default Edit_list_top;","map":{"version":3,"names":["Contracts_MetaMask","Form","useState","useEffect","useRef","MDEditor","selectWord","resolvePath","useParams","Simple_quiz","Quiz_list","Link","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Edit_list_top","props","cont","now_numRef","isTeacher","setIsTeacher","quiz_sum","Set_quiz_sum","quiz_list","Set_quiz_list","add_num","Set_add_num","containerRef","callback","entries","observer","forEach","entry","isIntersecting","console","log","get_quiz_lenght","then","data","Number","now","parseInt","current","set_is_teacher","targetRef","children","map","quiz","index","length","ref"],"sources":["/Users/toji.inoue/Desktop/卒業研究_井上登司フォルダ/web3-sotuken/src/pages/edit_list/edit_list_top.jsx"],"sourcesContent":["import { Contracts_MetaMask } from \"../../contract/contracts\";\nimport Form from \"react-bootstrap/Form\";\nimport { useState, useEffect, useRef } from \"react\";\nimport MDEditor, { selectWord } from \"@uiw/react-md-editor\";\nimport { resolvePath, useParams } from \"react-router-dom\";\nimport Simple_quiz from \"./components/quiz_simple\";\nimport Quiz_list from \"./components/quiz_list\";\nimport { Link } from \"react-router-dom\";\n\nfunction Edit_list_top(props) {\n    //クイズのコントラクト\n    let cont = new Contracts_MetaMask();\n\n    //現在表示している個数を保持するref\n    const now_numRef = useRef(0); //保存\n    const [isTeacher, setIsTeacher] = useState(false);\n    //クイズの総数\n    const [quiz_sum, Set_quiz_sum] = useState(null); //保存\n\n    //表示するクイズのリスト\n    const [quiz_list, Set_quiz_list] = useState([]); //保存\n    //１回の更新で追加で表示する個数\n    const [add_num, Set_add_num] = useState(7);\n    // コンテナのrefを作成\n    const containerRef = useRef(null);\n\n    const callback = (entries, observer) => {\n        entries.forEach((entry) => {\n            if (entry.isIntersecting) {\n                // ターゲットの<div>が画面に表示された場合に実行される関数\n                console.log(\"Target div is visible on the screen!\");\n                // ここに実行したい関数を記述\n\n                // console.log(\"///////\",now_num);\n            }\n        });\n    };\n\n    useEffect(() => {\n        cont.get_quiz_lenght().then((data) => {\n            // Promise オブジェクトが解決された後の処理を記述\n            console.log(Number(data));\n            let now = parseInt(Number(data));\n            Set_quiz_sum(now);\n            now_numRef.current = now;\n        });\n        const set_is_teacher = async () => {\n            setIsTeacher(await cont.isTeacher());\n        };\n        set_is_teacher();\n    }, []);\n\n    const targetRef = useRef(null); // ターゲット要素のrefを作成\n    console.log(\"ユーザーのisTeacherステータス\");\n    console.log(isTeacher);\n    if (isTeacher) {\n        if (quiz_sum != null) {\n            return (\n                <>\n                    {/* スクロールを監視するコンポーネント */}\n                    <Quiz_list cont={cont} add_num={add_num} Set_add_num={Set_add_num} quiz_sum={quiz_sum} Set_quiz_sum={Set_quiz_sum} quiz_list={quiz_list} Set_quiz_list={Set_quiz_list} targetRef={targetRef} now_numRef={now_numRef} />\n\n                    {/* */}\n                    {quiz_list.map((quiz, index) => {\n                        if (index !== quiz_list.length - add_num) {\n                            return <>{quiz_list[index]}</>;\n                        }\n                    })}\n                    <div ref={targetRef}>\n                        {/* ターゲット要素aの内容 */}\n                        now_loading\n                    </div>\n                </>\n            );\n        } else {\n            return <></>;\n        }\n    } else {\n        return <></>;\n    }\n}\nexport default Edit_list_top;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}