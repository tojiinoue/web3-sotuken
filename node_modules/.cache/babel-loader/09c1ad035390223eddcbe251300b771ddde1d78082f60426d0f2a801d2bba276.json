{"ast":null,"code":"import { solidityError, solidityPanic } from '../../constants/solidity.js';\nimport { AbiDecodingZeroDataError, AbiErrorSignatureNotFoundError } from '../../errors/abi.js';\nimport { slice } from '../data/slice.js';\nimport { getFunctionSelector } from '../hash/getFunctionSelector.js';\nimport { decodeAbiParameters } from './decodeAbiParameters.js';\nimport { formatAbiItem } from './formatAbiItem.js';\nexport function decodeErrorResult(_ref) {\n  let {\n    abi,\n    data\n  } = _ref;\n  const signature = slice(data, 0, 4);\n  if (signature === '0x') throw new AbiDecodingZeroDataError();\n  const abi_ = [...(abi || []), solidityError, solidityPanic];\n  const abiItem = abi_.find(x => x.type === 'error' && signature === getFunctionSelector(formatAbiItem(x)));\n  if (!abiItem) throw new AbiErrorSignatureNotFoundError(signature, {\n    docsPath: '/docs/contract/decodeErrorResult'\n  });\n  return {\n    abiItem,\n    args: 'inputs' in abiItem && abiItem.inputs && abiItem.inputs.length > 0 ? decodeAbiParameters(abiItem.inputs, slice(data, 4)) : undefined,\n    errorName: abiItem.name\n  };\n}","map":{"version":3,"names":["solidityError","solidityPanic","AbiDecodingZeroDataError","AbiErrorSignatureNotFoundError","slice","getFunctionSelector","decodeAbiParameters","formatAbiItem","decodeErrorResult","_ref","abi","data","signature","abi_","abiItem","find","x","type","docsPath","args","inputs","length","undefined","errorName","name"],"sources":["/Users/toji.inoue/Desktop/web3-sotuken/node_modules/viem/utils/abi/decodeErrorResult.ts"],"sourcesContent":["import type { Abi, ExtractAbiError, ExtractAbiErrorNames } from 'abitype'\n\nimport { solidityError, solidityPanic } from '../../constants/solidity.js'\nimport {\n  AbiDecodingZeroDataError,\n  AbiErrorSignatureNotFoundError,\n} from '../../errors/abi.js'\nimport type { AbiItem, GetErrorArgs } from '../../types/contract.js'\nimport type { Hex } from '../../types/misc.js'\nimport { slice } from '../data/slice.js'\nimport { getFunctionSelector } from '../hash/getFunctionSelector.js'\n\nimport { decodeAbiParameters } from './decodeAbiParameters.js'\nimport { formatAbiItem } from './formatAbiItem.js'\n\nexport type DecodeErrorResultParameters<\n  TAbi extends Abi | readonly unknown[] = Abi,\n> = { abi?: TAbi; data: Hex }\n\nexport type DecodeErrorResultReturnType<\n  TAbi extends Abi | readonly unknown[] = Abi,\n  _ErrorNames extends string = TAbi extends Abi\n    ? Abi extends TAbi\n      ? string\n      : ExtractAbiErrorNames<TAbi>\n    : string,\n> = {\n  [TName in _ErrorNames]: {\n    abiItem: TAbi extends Abi ? ExtractAbiError<TAbi, TName> : AbiItem\n    args: GetErrorArgs<TAbi, TName>['args']\n    errorName: TName\n  }\n}[_ErrorNames]\n\nexport function decodeErrorResult<const TAbi extends Abi | readonly unknown[]>({\n  abi,\n  data,\n}: DecodeErrorResultParameters<TAbi>): DecodeErrorResultReturnType<TAbi> {\n  const signature = slice(data, 0, 4)\n  if (signature === '0x') throw new AbiDecodingZeroDataError()\n\n  const abi_ = [...((abi as Abi) || []), solidityError, solidityPanic]\n  const abiItem = abi_.find(\n    (x) =>\n      x.type === 'error' && signature === getFunctionSelector(formatAbiItem(x)),\n  )\n  if (!abiItem)\n    throw new AbiErrorSignatureNotFoundError(signature, {\n      docsPath: '/docs/contract/decodeErrorResult',\n    })\n  return {\n    abiItem,\n    args: ('inputs' in abiItem && abiItem.inputs && abiItem.inputs.length > 0\n      ? decodeAbiParameters(abiItem.inputs, slice(data, 4))\n      : undefined) as readonly unknown[] | undefined,\n    errorName: (abiItem as { name: string }).name,\n  } as DecodeErrorResultReturnType<TAbi>\n}\n"],"mappings":"AAEA,SAASA,aAAa,EAAEC,aAAa,QAAQ,6BAA6B;AAC1E,SACEC,wBAAwB,EACxBC,8BAA8B,QACzB,qBAAqB;AAG5B,SAASC,KAAK,QAAQ,kBAAkB;AACxC,SAASC,mBAAmB,QAAQ,gCAAgC;AAEpE,SAASC,mBAAmB,QAAQ,0BAA0B;AAC9D,SAASC,aAAa,QAAQ,oBAAoB;AAqBlD,OAAM,SAAUC,iBAAiBA,CAAAC,IAAA,EAGG;EAAA,IAH2C;IAC7EC,GAAG;IACHC;EAAI,CAC8B,GAAAF,IAAA;EAClC,MAAMG,SAAS,GAAGR,KAAK,CAACO,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;EACnC,IAAIC,SAAS,KAAK,IAAI,EAAE,MAAM,IAAIV,wBAAwB,EAAE;EAE5D,MAAMW,IAAI,GAAG,CAAC,IAAKH,GAAW,IAAI,EAAE,CAAC,EAAEV,aAAa,EAAEC,aAAa,CAAC;EACpE,MAAMa,OAAO,GAAGD,IAAI,CAACE,IAAI,CACtBC,CAAC,IACAA,CAAC,CAACC,IAAI,KAAK,OAAO,IAAIL,SAAS,KAAKP,mBAAmB,CAACE,aAAa,CAACS,CAAC,CAAC,CAAC,CAC5E;EACD,IAAI,CAACF,OAAO,EACV,MAAM,IAAIX,8BAA8B,CAACS,SAAS,EAAE;IAClDM,QAAQ,EAAE;GACX,CAAC;EACJ,OAAO;IACLJ,OAAO;IACPK,IAAI,EAAG,QAAQ,IAAIL,OAAO,IAAIA,OAAO,CAACM,MAAM,IAAIN,OAAO,CAACM,MAAM,CAACC,MAAM,GAAG,CAAC,GACrEf,mBAAmB,CAACQ,OAAO,CAACM,MAAM,EAAEhB,KAAK,CAACO,IAAI,EAAE,CAAC,CAAC,CAAC,GACnDW,SAA4C;IAChDC,SAAS,EAAGT,OAA4B,CAACU;GACL;AACxC"},"metadata":{},"sourceType":"module","externalDependencies":[]}