{"ast":null,"code":"import { hexToNumber } from '../encoding/fromHex.js';\nimport { defineFormatter } from './formatter.js';\nexport const transactionType = {\n  '0x0': 'legacy',\n  '0x1': 'eip2930',\n  '0x2': 'eip1559'\n};\nexport function formatTransaction(transaction) {\n  const transaction_ = {\n    ...transaction,\n    blockHash: transaction.blockHash ? transaction.blockHash : null,\n    blockNumber: transaction.blockNumber ? BigInt(transaction.blockNumber) : null,\n    chainId: transaction.chainId ? hexToNumber(transaction.chainId) : undefined,\n    gas: transaction.gas ? BigInt(transaction.gas) : undefined,\n    gasPrice: transaction.gasPrice ? BigInt(transaction.gasPrice) : undefined,\n    maxFeePerGas: transaction.maxFeePerGas ? BigInt(transaction.maxFeePerGas) : undefined,\n    maxPriorityFeePerGas: transaction.maxPriorityFeePerGas ? BigInt(transaction.maxPriorityFeePerGas) : undefined,\n    nonce: transaction.nonce ? hexToNumber(transaction.nonce) : undefined,\n    to: transaction.to ? transaction.to : null,\n    transactionIndex: transaction.transactionIndex ? Number(transaction.transactionIndex) : null,\n    type: transaction.type ? transactionType[transaction.type] : undefined,\n    typeHex: transaction.type ? transaction.type : undefined,\n    value: transaction.value ? BigInt(transaction.value) : undefined,\n    v: transaction.v ? BigInt(transaction.v) : undefined\n  };\n  if (transaction_.type === 'legacy') {\n    delete transaction_.accessList;\n    delete transaction_.maxFeePerGas;\n    delete transaction_.maxPriorityFeePerGas;\n  }\n  if (transaction_.type === 'eip2930') {\n    delete transaction_.maxFeePerGas;\n    delete transaction_.maxPriorityFeePerGas;\n  }\n  return transaction_;\n}\nexport const defineTransaction = /*#__PURE__*/defineFormatter('transaction', formatTransaction);","map":{"version":3,"names":["hexToNumber","defineFormatter","transactionType","formatTransaction","transaction","transaction_","blockHash","blockNumber","BigInt","chainId","undefined","gas","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","transactionIndex","Number","type","typeHex","value","v","accessList","defineTransaction"],"sources":["/Users/toji.inoue/Desktop/web3-sotuken/node_modules/viem/utils/formatters/transaction.ts"],"sourcesContent":["import type { BlockTag } from '../../types/block.js'\nimport type { Chain } from '../../types/chain.js'\nimport type {\n  ExtractChainFormatterExclude,\n  ExtractChainFormatterReturnType,\n} from '../../types/chain.js'\nimport type { RpcTransaction } from '../../types/rpc.js'\nimport type { Transaction } from '../../types/transaction.js'\nimport type { UnionOmit } from '../../types/utils.js'\nimport { hexToNumber } from '../encoding/fromHex.js'\nimport { defineFormatter } from './formatter.js'\n\ntype TransactionPendingDependencies =\n  | 'blockHash'\n  | 'blockNumber'\n  | 'transactionIndex'\n\nexport type FormattedTransaction<\n  TChain extends { formatters?: Chain['formatters'] } | undefined =\n    | { formatters?: Chain['formatters'] }\n    | undefined,\n  TBlockTag extends BlockTag = BlockTag,\n  _FormatterReturnType = ExtractChainFormatterReturnType<\n    TChain,\n    'transaction',\n    Transaction\n  >,\n  _ExcludedPendingDependencies extends string = TransactionPendingDependencies &\n    ExtractChainFormatterExclude<TChain, 'transaction'>,\n> = UnionOmit<_FormatterReturnType, TransactionPendingDependencies> & {\n  [K in _ExcludedPendingDependencies]: never\n} & Pick<\n    Transaction<bigint, number, TBlockTag extends 'pending' ? true : false>,\n    TransactionPendingDependencies\n  >\n\nexport const transactionType = {\n  '0x0': 'legacy',\n  '0x1': 'eip2930',\n  '0x2': 'eip1559',\n} as const\n\nexport function formatTransaction(transaction: Partial<RpcTransaction>) {\n  const transaction_ = {\n    ...transaction,\n    blockHash: transaction.blockHash ? transaction.blockHash : null,\n    blockNumber: transaction.blockNumber\n      ? BigInt(transaction.blockNumber)\n      : null,\n    chainId: transaction.chainId ? hexToNumber(transaction.chainId) : undefined,\n    gas: transaction.gas ? BigInt(transaction.gas) : undefined,\n    gasPrice: transaction.gasPrice ? BigInt(transaction.gasPrice) : undefined,\n    maxFeePerGas: transaction.maxFeePerGas\n      ? BigInt(transaction.maxFeePerGas)\n      : undefined,\n    maxPriorityFeePerGas: transaction.maxPriorityFeePerGas\n      ? BigInt(transaction.maxPriorityFeePerGas)\n      : undefined,\n    nonce: transaction.nonce ? hexToNumber(transaction.nonce) : undefined,\n    to: transaction.to ? transaction.to : null,\n    transactionIndex: transaction.transactionIndex\n      ? Number(transaction.transactionIndex)\n      : null,\n    type: transaction.type ? transactionType[transaction.type] : undefined,\n    typeHex: transaction.type ? transaction.type : undefined,\n    value: transaction.value ? BigInt(transaction.value) : undefined,\n    v: transaction.v ? BigInt(transaction.v) : undefined,\n  }\n\n  if (transaction_.type === 'legacy') {\n    delete transaction_.accessList\n    delete transaction_.maxFeePerGas\n    delete transaction_.maxPriorityFeePerGas\n  }\n  if (transaction_.type === 'eip2930') {\n    delete transaction_.maxFeePerGas\n    delete transaction_.maxPriorityFeePerGas\n  }\n  return transaction_ as Transaction\n}\n\nexport const defineTransaction = /*#__PURE__*/ defineFormatter(\n  'transaction',\n  formatTransaction,\n)\n"],"mappings":"AASA,SAASA,WAAW,QAAQ,wBAAwB;AACpD,SAASC,eAAe,QAAQ,gBAAgB;AA0BhD,OAAO,MAAMC,eAAe,GAAG;EAC7B,KAAK,EAAE,QAAQ;EACf,KAAK,EAAE,SAAS;EAChB,KAAK,EAAE;CACC;AAEV,OAAM,SAAUC,iBAAiBA,CAACC,WAAoC;EACpE,MAAMC,YAAY,GAAG;IACnB,GAAGD,WAAW;IACdE,SAAS,EAAEF,WAAW,CAACE,SAAS,GAAGF,WAAW,CAACE,SAAS,GAAG,IAAI;IAC/DC,WAAW,EAAEH,WAAW,CAACG,WAAW,GAChCC,MAAM,CAACJ,WAAW,CAACG,WAAW,CAAC,GAC/B,IAAI;IACRE,OAAO,EAAEL,WAAW,CAACK,OAAO,GAAGT,WAAW,CAACI,WAAW,CAACK,OAAO,CAAC,GAAGC,SAAS;IAC3EC,GAAG,EAAEP,WAAW,CAACO,GAAG,GAAGH,MAAM,CAACJ,WAAW,CAACO,GAAG,CAAC,GAAGD,SAAS;IAC1DE,QAAQ,EAAER,WAAW,CAACQ,QAAQ,GAAGJ,MAAM,CAACJ,WAAW,CAACQ,QAAQ,CAAC,GAAGF,SAAS;IACzEG,YAAY,EAAET,WAAW,CAACS,YAAY,GAClCL,MAAM,CAACJ,WAAW,CAACS,YAAY,CAAC,GAChCH,SAAS;IACbI,oBAAoB,EAAEV,WAAW,CAACU,oBAAoB,GAClDN,MAAM,CAACJ,WAAW,CAACU,oBAAoB,CAAC,GACxCJ,SAAS;IACbK,KAAK,EAAEX,WAAW,CAACW,KAAK,GAAGf,WAAW,CAACI,WAAW,CAACW,KAAK,CAAC,GAAGL,SAAS;IACrEM,EAAE,EAAEZ,WAAW,CAACY,EAAE,GAAGZ,WAAW,CAACY,EAAE,GAAG,IAAI;IAC1CC,gBAAgB,EAAEb,WAAW,CAACa,gBAAgB,GAC1CC,MAAM,CAACd,WAAW,CAACa,gBAAgB,CAAC,GACpC,IAAI;IACRE,IAAI,EAAEf,WAAW,CAACe,IAAI,GAAGjB,eAAe,CAACE,WAAW,CAACe,IAAI,CAAC,GAAGT,SAAS;IACtEU,OAAO,EAAEhB,WAAW,CAACe,IAAI,GAAGf,WAAW,CAACe,IAAI,GAAGT,SAAS;IACxDW,KAAK,EAAEjB,WAAW,CAACiB,KAAK,GAAGb,MAAM,CAACJ,WAAW,CAACiB,KAAK,CAAC,GAAGX,SAAS;IAChEY,CAAC,EAAElB,WAAW,CAACkB,CAAC,GAAGd,MAAM,CAACJ,WAAW,CAACkB,CAAC,CAAC,GAAGZ;GAC5C;EAED,IAAIL,YAAY,CAACc,IAAI,KAAK,QAAQ,EAAE;IAClC,OAAOd,YAAY,CAACkB,UAAU;IAC9B,OAAOlB,YAAY,CAACQ,YAAY;IAChC,OAAOR,YAAY,CAACS,oBAAoB;;EAE1C,IAAIT,YAAY,CAACc,IAAI,KAAK,SAAS,EAAE;IACnC,OAAOd,YAAY,CAACQ,YAAY;IAChC,OAAOR,YAAY,CAACS,oBAAoB;;EAE1C,OAAOT,YAA2B;AACpC;AAEA,OAAO,MAAMmB,iBAAiB,GAAG,aAAcvB,eAAe,CAC5D,aAAa,EACbE,iBAAiB,CAClB"},"metadata":{},"sourceType":"module","externalDependencies":[]}