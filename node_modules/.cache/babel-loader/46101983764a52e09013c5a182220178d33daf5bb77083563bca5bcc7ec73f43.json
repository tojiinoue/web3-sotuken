{"ast":null,"code":"import { defineFormatter } from './formatter.js';\nimport { formatTransaction } from './transaction.js';\nexport function formatBlock(block) {\n  var _block$transactions;\n  const transactions = (_block$transactions = block.transactions) === null || _block$transactions === void 0 ? void 0 : _block$transactions.map(transaction => {\n    if (typeof transaction === 'string') return transaction;\n    return formatTransaction(transaction);\n  });\n  return {\n    ...block,\n    baseFeePerGas: block.baseFeePerGas ? BigInt(block.baseFeePerGas) : null,\n    difficulty: block.difficulty ? BigInt(block.difficulty) : undefined,\n    gasLimit: block.gasLimit ? BigInt(block.gasLimit) : undefined,\n    gasUsed: block.gasUsed ? BigInt(block.gasUsed) : undefined,\n    hash: block.hash ? block.hash : null,\n    logsBloom: block.logsBloom ? block.logsBloom : null,\n    nonce: block.nonce ? block.nonce : null,\n    number: block.number ? BigInt(block.number) : null,\n    size: block.size ? BigInt(block.size) : undefined,\n    timestamp: block.timestamp ? BigInt(block.timestamp) : undefined,\n    transactions,\n    totalDifficulty: block.totalDifficulty ? BigInt(block.totalDifficulty) : null\n  };\n}\nexport const defineBlock = /*#__PURE__*/defineFormatter('block', formatBlock);","map":{"version":3,"names":["defineFormatter","formatTransaction","formatBlock","block","_block$transactions","transactions","map","transaction","baseFeePerGas","BigInt","difficulty","undefined","gasLimit","gasUsed","hash","logsBloom","nonce","number","size","timestamp","totalDifficulty","defineBlock"],"sources":["/Users/toji.inoue/Desktop/web3-sotuken/node_modules/viem/utils/formatters/block.ts"],"sourcesContent":["import type { Block, BlockTag } from '../../types/block.js'\nimport type { Chain } from '../../types/chain.js'\nimport type {\n  ExtractChainFormatterExclude,\n  ExtractChainFormatterReturnType,\n} from '../../types/chain.js'\nimport type { Hash } from '../../types/misc.js'\nimport type { RpcBlock } from '../../types/rpc.js'\nimport type { Prettify } from '../../types/utils.js'\n\nimport { defineFormatter } from './formatter.js'\nimport { type FormattedTransaction, formatTransaction } from './transaction.js'\n\ntype BlockPendingDependencies = 'hash' | 'logsBloom' | 'nonce' | 'number'\n\nexport type FormattedBlock<\n  TChain extends { formatters?: Chain['formatters'] } | undefined =\n    | { formatters?: Chain['formatters'] }\n    | undefined,\n  TIncludeTransactions extends boolean = boolean,\n  TBlockTag extends BlockTag = BlockTag,\n  _FormatterReturnType = ExtractChainFormatterReturnType<\n    TChain,\n    'block',\n    Block<bigint, TIncludeTransactions>\n  >,\n  _ExcludedPendingDependencies extends string = BlockPendingDependencies &\n    ExtractChainFormatterExclude<TChain, 'block'>,\n  _Formatted = Omit<_FormatterReturnType, BlockPendingDependencies> & {\n    [K in _ExcludedPendingDependencies]: never\n  } & Pick<\n      Block<bigint, TIncludeTransactions, TBlockTag>,\n      BlockPendingDependencies\n    >,\n  _Transactions = TIncludeTransactions extends true\n    ? Prettify<FormattedTransaction<TChain, TBlockTag>>[]\n    : Hash[],\n> = Omit<_Formatted, 'transactions'> & {\n  transactions: _Transactions\n}\n\nexport function formatBlock(block: Partial<RpcBlock>) {\n  const transactions = block.transactions?.map((transaction) => {\n    if (typeof transaction === 'string') return transaction\n    return formatTransaction(transaction)\n  })\n  return {\n    ...block,\n    baseFeePerGas: block.baseFeePerGas ? BigInt(block.baseFeePerGas) : null,\n    difficulty: block.difficulty ? BigInt(block.difficulty) : undefined,\n    gasLimit: block.gasLimit ? BigInt(block.gasLimit) : undefined,\n    gasUsed: block.gasUsed ? BigInt(block.gasUsed) : undefined,\n    hash: block.hash ? block.hash : null,\n    logsBloom: block.logsBloom ? block.logsBloom : null,\n    nonce: block.nonce ? block.nonce : null,\n    number: block.number ? BigInt(block.number) : null,\n    size: block.size ? BigInt(block.size) : undefined,\n    timestamp: block.timestamp ? BigInt(block.timestamp) : undefined,\n    transactions,\n    totalDifficulty: block.totalDifficulty\n      ? BigInt(block.totalDifficulty)\n      : null,\n  } as Block\n}\n\nexport const defineBlock = /*#__PURE__*/ defineFormatter('block', formatBlock)\n"],"mappings":"AAUA,SAASA,eAAe,QAAQ,gBAAgB;AAChD,SAAoCC,iBAAiB,QAAQ,kBAAkB;AA8B/E,OAAM,SAAUC,WAAWA,CAACC,KAAwB;EAAA,IAAAC,mBAAA;EAClD,MAAMC,YAAY,IAAAD,mBAAA,GAAGD,KAAK,CAACE,YAAY,cAAAD,mBAAA,uBAAlBA,mBAAA,CAAoBE,GAAG,CAAEC,WAAW,IAAI;IAC3D,IAAI,OAAOA,WAAW,KAAK,QAAQ,EAAE,OAAOA,WAAW;IACvD,OAAON,iBAAiB,CAACM,WAAW,CAAC;EACvC,CAAC,CAAC;EACF,OAAO;IACL,GAAGJ,KAAK;IACRK,aAAa,EAAEL,KAAK,CAACK,aAAa,GAAGC,MAAM,CAACN,KAAK,CAACK,aAAa,CAAC,GAAG,IAAI;IACvEE,UAAU,EAAEP,KAAK,CAACO,UAAU,GAAGD,MAAM,CAACN,KAAK,CAACO,UAAU,CAAC,GAAGC,SAAS;IACnEC,QAAQ,EAAET,KAAK,CAACS,QAAQ,GAAGH,MAAM,CAACN,KAAK,CAACS,QAAQ,CAAC,GAAGD,SAAS;IAC7DE,OAAO,EAAEV,KAAK,CAACU,OAAO,GAAGJ,MAAM,CAACN,KAAK,CAACU,OAAO,CAAC,GAAGF,SAAS;IAC1DG,IAAI,EAAEX,KAAK,CAACW,IAAI,GAAGX,KAAK,CAACW,IAAI,GAAG,IAAI;IACpCC,SAAS,EAAEZ,KAAK,CAACY,SAAS,GAAGZ,KAAK,CAACY,SAAS,GAAG,IAAI;IACnDC,KAAK,EAAEb,KAAK,CAACa,KAAK,GAAGb,KAAK,CAACa,KAAK,GAAG,IAAI;IACvCC,MAAM,EAAEd,KAAK,CAACc,MAAM,GAAGR,MAAM,CAACN,KAAK,CAACc,MAAM,CAAC,GAAG,IAAI;IAClDC,IAAI,EAAEf,KAAK,CAACe,IAAI,GAAGT,MAAM,CAACN,KAAK,CAACe,IAAI,CAAC,GAAGP,SAAS;IACjDQ,SAAS,EAAEhB,KAAK,CAACgB,SAAS,GAAGV,MAAM,CAACN,KAAK,CAACgB,SAAS,CAAC,GAAGR,SAAS;IAChEN,YAAY;IACZe,eAAe,EAAEjB,KAAK,CAACiB,eAAe,GAClCX,MAAM,CAACN,KAAK,CAACiB,eAAe,CAAC,GAC7B;GACI;AACZ;AAEA,OAAO,MAAMC,WAAW,GAAG,aAAcrB,eAAe,CAAC,OAAO,EAAEE,WAAW,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}