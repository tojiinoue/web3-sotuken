{"ast":null,"code":"import{useState,useEffect}from\"react\";import Button from\"react-bootstrap/Button\";import{useLocation}from\"react-router-dom\";import{Contracts_MetaMask}from\"../../contract/contracts\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Investment_to_quiz(){const location=useLocation();const[id,setId]=useState(location.state.args[0]);const[amount,setAmount]=useState(0);const[isNotPayingOut,setIsNotPayingOut]=useState(\"true\");const[numOfStudent,setNumOfStudent]=useState(0);const[answer,setAnswer]=useState(\"\");const[isteacher,setisteacher]=useState(null);const[isNotAddingReward,setIsNotAddingReward]=useState(\"true\");const[students,setStudents]=useState(null);let Contract=new Contracts_MetaMask();const handleOptionChange=event=>{setIsNotPayingOut(event.target.value);console.log(isNotPayingOut);};const adding_reward=event=>{setIsNotAddingReward(event.target.value);console.log(isNotAddingReward);};async function get_contract(){setNumOfStudent((await Contract.get_num_of_students())+30);}async function is_teacher(){setisteacher(await Contract.isTeacher());}async function get_students(){setStudents(await Contract.get_student_list());}get_contract();is_teacher();const convertFullWidthNumbersToHalf=(()=>{// 全角数字と半角数字の差分を計算\nconst diff=\"０\".charCodeAt(0)-\"0\".charCodeAt(0);// 置換関数を返す\nreturn text=>text.replace(/[０-９]/g,m=>String.fromCharCode(m.charCodeAt(0)-diff));})();const investment_to_quiz=async()=>{if((answer==\"\"&&isNotPayingOut==\"false\")==false){Contract.investment_to_quiz(id,amount,convertFullWidthNumbersToHalf(answer),isNotPayingOut,numOfStudent,isNotAddingReward,students);}else{alert(\"答えを入力してください\");}};useEffect(()=>{get_students();},[]);console.log(isNotPayingOut);console.log(students);if(isteacher){return/*#__PURE__*/_jsx(\"div\",{className:\"col mb-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-10\",children:[\"\\u3053\\u306E\\u30C6\\u30B9\\u30C8\\u306EID\\u306F\",id,\"\\u3067\\u3059\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-10\",children:[\"\\u4EE5\\u4E0B\\u306B\\u8FFD\\u52A0\\u3059\\u308B\\u5831\\u916C(FLT)\\u306E\\u91CF\\u3092\\u6307\\u5B9A\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:amount,onChange:event=>{setAmount(event.target.value);}}),\"\\u6B63\\u7B54\\u3057\\u305F\\u751F\\u5F92\\u4E00\\u4EBA\\u3072\\u3068\\u308A\\u306B\\u4E0E\\u3048\\u3089\\u308C\\u308BFLT\\u30C8\\u30FC\\u30AF\\u30F3\\u91CF\\uFF1A \",amount,\"FLT\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u3042\\u306A\\u305F\\u304B\\u3089\\u6255\\u3044\\u3060\\u3055\\u308C\\u308BFLT\\u30C8\\u30FC\\u30AF\\u30F3\\u91CF\\uFF1A \",amount*numOfStudent,\"FLT\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-10\",style:{marginTop:\"20px\"},children:[\"\\u4EE5\\u4E0B\\u306B\\u78BA\\u5B9A\\u3057\\u305F\\u7B54\\u3048\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:answer,onChange:event=>{setAnswer(event.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),\"\\u4EE5\\u4E0B\\u306F\\u3001\\u89E3\\u7B54\\u3092\\u78BA\\u5B9A\\u3057\\u3066\\u5831\\u916C\\u306E\\u6255\\u3044\\u51FA\\u3057\\u3092\\u884C\\u3046\\u304B\\u884C\\u308F\\u306A\\u3044\\u304B\\u306E\\u9078\\u629E\\u3067\\u3059\\u3002\",/*#__PURE__*/_jsxs(\"div\",{className:\"col-10\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"true\",onChange:handleOptionChange,checked:isNotPayingOut===\"true\"}),\"\\u307E\\u3060\\u5831\\u916C\\u306E\\u6255\\u3044\\u51FA\\u3057\\u3092\\u884C\\u308F\\u306A\\u3044\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"false\",onChange:handleOptionChange,checked:isNotPayingOut===\"false\"}),\"\\u89E3\\u7B54\\u3092\\u78BA\\u5B9A\\u3057\\u3066\\u5831\\u916C\\u3092\\u6255\\u3044\\u51FA\\u3059\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),\"\\u3053\\u306E\\u554F\\u984C\\u306F\\u767A\\u8868\\u3055\\u308C\\u307E\\u3057\\u305F\\u304B\\uFF1F\\u767A\\u8868\\u3055\\u308C\\u3066\\u3044\\u308C\\u3070\\u767A\\u8868\\u8005\\u306B\\u4E8C\\u500D\\u306E\\u30C8\\u30FC\\u30AF\\u30F3\\u3092\\u652F\\u6255\\u3044\\u307E\\u3059\",/*#__PURE__*/_jsxs(\"div\",{className:\"col-10\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"true\",onChange:adding_reward,checked:isNotAddingReward===\"true\"}),\"\\u767A\\u8868\\u3055\\u308C\\u3066\\u3044\\u306A\\u3044\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"false\",onChange:adding_reward,checked:isNotAddingReward===\"false\"}),\"\\u767A\\u8868\\u3055\\u308C\\u3066\\u3044\\u308B\"]})]}),/*#__PURE__*/_jsx(Button,{className:\"col-10\",variant:\"primary\",onClick:()=>investment_to_quiz(),style:{marginTop:\"20px\"},children:\"\\u5831\\u916C\\u306E\\u8FFD\\u52A0\\u3001\\u5831\\u916C\\u306E\\u6255\\u3044\\u51FA\\u3057\\u3092\\u5B9F\\u884C\"})]})});}else{return/*#__PURE__*/_jsx(_Fragment,{});}}export default Investment_to_quiz;","map":{"version":3,"names":["useState","useEffect","Button","useLocation","Contracts_MetaMask","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Investment_to_quiz","location","id","setId","state","args","amount","setAmount","isNotPayingOut","setIsNotPayingOut","numOfStudent","setNumOfStudent","answer","setAnswer","isteacher","setisteacher","isNotAddingReward","setIsNotAddingReward","students","setStudents","Contract","handleOptionChange","event","target","value","console","log","adding_reward","get_contract","get_num_of_students","is_teacher","isTeacher","get_students","get_student_list","convertFullWidthNumbersToHalf","diff","charCodeAt","text","replace","m","String","fromCharCode","investment_to_quiz","alert","className","children","type","onChange","style","marginTop","checked","variant","onClick"],"sources":["/Users/toji.inoue/Desktop/sotuken_matome/web3-sotuken/src/pages/investment_page/investment_page.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { Contracts_MetaMask } from \"../../contract/contracts\";\r\n\r\nfunction Investment_to_quiz() {\r\n    const location = useLocation();\r\n\r\n    const [id, setId] = useState(location.state.args[0]);\r\n    const [amount, setAmount] = useState(0);\r\n    const [isNotPayingOut, setIsNotPayingOut] = useState(\"true\");\r\n    const [numOfStudent, setNumOfStudent] = useState(0);\r\n    const [answer, setAnswer] = useState(\"\");\r\n    const [isteacher, setisteacher] = useState(null);\r\n    const [isNotAddingReward, setIsNotAddingReward] = useState(\"true\");\r\n    const [students, setStudents] = useState(null);\r\n\r\n    let Contract = new Contracts_MetaMask();\r\n\r\n    const handleOptionChange = (event) => {\r\n        setIsNotPayingOut(event.target.value);\r\n        console.log(isNotPayingOut);\r\n\r\n    };\r\n\r\n    const adding_reward = (event) => {\r\n        setIsNotAddingReward(event.target.value);\r\n        console.log(isNotAddingReward);\r\n\r\n    };\r\n\r\n    async function get_contract() {\r\n        setNumOfStudent((await Contract.get_num_of_students()) + 30);\r\n    }\r\n\r\n    async function is_teacher() {\r\n        setisteacher(await Contract.isTeacher());\r\n    }\r\n    async function get_students() {\r\n        setStudents(await Contract.get_student_list());\r\n    }\r\n\r\n    get_contract();\r\n    is_teacher();\r\n\r\n    const convertFullWidthNumbersToHalf = (() => {\r\n        // 全角数字と半角数字の差分を計算\r\n        const diff = \"０\".charCodeAt(0) - \"0\".charCodeAt(0);\r\n\r\n        // 置換関数を返す\r\n        return text => text.replace(\r\n            /[０-９]/g\r\n            , m => String.fromCharCode(m.charCodeAt(0) - diff)\r\n        );\r\n    })();\r\n\r\n    const investment_to_quiz = async () => {\r\n        if ((answer == \"\" && isNotPayingOut == \"false\") == false) {\r\n            Contract.investment_to_quiz(id, amount, convertFullWidthNumbersToHalf(answer), isNotPayingOut, numOfStudent, isNotAddingReward, students);\r\n        } else {\r\n            alert(\"答えを入力してください\");\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        get_students();\r\n    }, []);\r\n\r\n    console.log(isNotPayingOut);\r\n    console.log(students);\r\n\r\n\r\n\r\n    if (isteacher) {\r\n        return (\r\n            <div className=\"col mb-5\">\r\n                <div className=\"row justify-content-center\">\r\n                    <div className=\"col-10\">\r\n                        このテストのIDは{id}です\r\n                    </div>\r\n                    <div className=\"col-10\">\r\n                        以下に追加する報酬(FLT)の量を指定してください<br />\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"form-control\"\r\n                            value={amount}\r\n                            onChange={(event) => {\r\n                                setAmount(event.target.value);\r\n                            }}\r\n                        />\r\n                        正答した生徒一人ひとりに与えられるFLTトークン量： {amount}FLT\r\n                        <br />\r\n                        あなたから払いだされるFLTトークン量： {amount * numOfStudent}FLT\r\n\r\n                    </div>\r\n                    <div className=\"col-10\" style={{ marginTop: \"20px\" }}>\r\n                        以下に確定した答えを入力してください\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"form-control\"\r\n                            value={answer}\r\n                            onChange={(event) => {\r\n                                setAnswer(event.target.value);\r\n                            }}\r\n                        />\r\n\r\n                    </div>\r\n                    <br />\r\n                    以下は、解答を確定して報酬の払い出しを行うか行わないかの選択です。\r\n                    <div className=\"col-10\">\r\n                        <label>\r\n                            <input\r\n                                type=\"radio\"\r\n                                value=\"true\"\r\n                                onChange={handleOptionChange}\r\n                                checked={isNotPayingOut === \"true\"}\r\n                            />\r\n                            まだ報酬の払い出しを行わない\r\n                        </label>\r\n                        <br />\r\n                        <label>\r\n                            <input\r\n                                type=\"radio\"\r\n                                value=\"false\"\r\n                                onChange={handleOptionChange}\r\n                                checked={isNotPayingOut === \"false\"}\r\n                            />\r\n                            解答を確定して報酬を払い出す\r\n                        </label>\r\n                    </div>\r\n                    <br />\r\n                    この問題は発表されましたか？発表されていれば発表者に二倍のトークンを支払います\r\n                    <div className=\"col-10\">\r\n                        <label>\r\n                            <input\r\n                                type=\"radio\"\r\n                                value=\"true\"\r\n                                onChange={adding_reward}\r\n                                checked={isNotAddingReward === \"true\"}\r\n                            />\r\n                            発表されていない\r\n                        </label>\r\n                        <br />\r\n                        <label>\r\n                            <input\r\n                                type=\"radio\"\r\n                                value=\"false\"\r\n                                onChange={adding_reward}\r\n                                checked={isNotAddingReward === \"false\"}\r\n                            />発表されている\r\n                        </label>\r\n                    </div>\r\n\r\n                    <Button className=\"col-10\" variant=\"primary\" onClick={() => investment_to_quiz()} style={{ marginTop: \"20px\" }}>\r\n                        報酬の追加、報酬の払い出しを実行\r\n                    </Button>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    } else {\r\n        return (<></>);\r\n    }\r\n}\r\n\r\nexport default Investment_to_quiz;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}